"use strict";function loadDesign(){var e=window.innerHeight-document.getElementById("toolbar").clientHeight,t=window.innerWidth;hView===!1?(document.getElementById("editor").style.height=e-30+"px",document.getElementById("preview").style.height=e-20+"px",document.getElementById("editor").style.width=t/2-18+"px",document.getElementById("preview").style.width=t/2-16+"px"):(document.getElementById("editor").style.height=e/2-22+"px",document.getElementById("preview").style.height=e/2-22+"px",document.getElementById("editor").style.width=t-42+"px",document.getElementById("preview").style.width=t-32+"px")}function changeView(){var e=window.innerHeight-document.getElementById("toolbar").clientHeight,t=window.innerWidth;hView===!0?(hView=!1,btnOnOff.on("changeViewBtn"),document.getElementById("editor").style.height=e-30+"px",document.getElementById("preview").style.height=e-20+"px",document.getElementById("editor").style.width=t/2-18+"px",document.getElementById("preview").style.width=t/2-16+"px",document.getElementById("editor").style.cssFloat="left",document.getElementById("preview").style.cssFloat="left"):(hView=!0,btnOnOff.off("changeViewBtn"),document.getElementById("editor").style.height=e/2-22+"px",document.getElementById("preview").style.height=e/2-22+"px",document.getElementById("editor").style.width=t-42+"px",document.getElementById("preview").style.width=t-32+"px",document.getElementById("editor").style.cssFloat="none",document.getElementById("preview").style.cssFloat="none")}function specialChar(e){switch(e){case"<":insertAtCaret("editor","&lt;");break;case">":insertAtCaret("editor","&gt;");break;case"q":insertAtCaret("editor","&quot;");break;case"&":insertAtCaret("editor","&#38;");break;case"#":insertAtCaret("editor","&#35;")}}function autoText(e){if(!e.defaultPrevented&&codeConvert===!0)switch(e.which){case 60:e.preventDefault(),insertAtCaret("editor","&lt;");break;case 62:e.preventDefault(),insertAtCaret("editor","&gt;");break;case 34:e.preventDefault(),insertAtCaret("editor","&quot;");break;case 38:e.preventDefault(),insertAtCaret("editor","&#38;");break;case 35:e.preventDefault(),insertAtCaret("editor","&#35;");break;default:return}}function autoTextDown(e){if(!e.defaultPrevented){switch(e.which){case 9:e.preventDefault(),insertAtCaret("editor","    ");break;case 112:e.preventDefault(),startPostEditor()}if(e.ctrlKey&&0!=e.which)switch(e.which){case 66:e.preventDefault(),insertSnippet("<strong>","</strong>");break;case 73:e.preventDefault(),insertSnippet("<em>","</em>");break;case 85:e.preventDefault(),insertSnippet("<u>","</u>");break;case 80:e.preventDefault(),insertSnippet("<p>","</p>");break;case 49:e.preventDefault(),insertSnippet("<h1>","</h1>");break;case 50:e.preventDefault(),insertSnippet("<h2>","</h2>");break;case 51:e.preventDefault(),insertSnippet("<h3>","</h3>");break;case 52:e.preventDefault(),insertSnippet("<h4>","</h4>");break;default:return}if(e.altKey&&0!=e.which)switch(e.which){case 49:e.preventDefault(),insCode();break;case 50:e.preventDefault(),insMark();break;case 51:e.preventDefault(),insInfo();break;case 52:e.preventDefault(),insQues();break;case 53:e.preventDefault(),insTips();break;case 54:e.preventDefault(),insCaution();break;default:return}}}function insertAtCaret(e,t){var n=document.getElementById(e),i=n.scrollTop,r=0,o=n.selectionStart||"0"==n.selectionStart?"ff":document.selection?"ie":!1;if("ie"==o){n.focus();var s=document.selection.createRange();s.moveStart("character",-n.value.length),r=s.text.length}else"ff"==o&&(r=n.selectionStart);var a=n.value.substring(0,r),l=n.value.substring(r,n.value.length);if(n.value=a+t+l,r+=t.length,"ie"==o){n.focus();var s=document.selection.createRange();s.moveStart("character",-n.value.length),s.moveStart("character",r),s.moveEnd("character",0),s.select()}else"ff"==o&&(n.selectionStart=r,n.selectionEnd=r,n.focus());n.scrollTop=i}function help(){var e=confirm("The help docs will REPLACE your TEXTs/CODEs from text editor. Please save your works other place before continue, or your works will LOST FOREVER!\n\nAre you sure want to see help docs?");e&&(document.getElementById("editor").value='<p>Salam world!</p>\n<div class="questions">\n	<p>Open-source post editor for <b>IW Code</b>.</p>\n</div>\n<p><strong>Rules and Examples:</strong></p>\n<p>Every line must be in between <span class="blue">&lt;p&gt;&lt;/p&gt;</span> tag.</p>\n<p><span class="red">All u write here automatically save inside the browser. So, don\'t need to save separately.</span></p>\n<p><strong>After completing the post copy-paste the code in a notepad and save it as <span class="blue">.txt</span> file with <span class="red">UTF-8</span> Encoding.</strong></p>\n<div class="caution">\n	<p>Don\'t <span class="red">clear </span>the <strong>cache </strong>in your browser without <span class="blue">saving </span>the code separately. <span class="red">It will clear save codes!</span> :(</p>\n</div>\n<p>Code example:</p>\n<pre><code class="language-c">#include&lt;stdio.h&gt;\n\nint main()\n{\n    printf(&quot;Salam world!&quot;);\n    return 0;\n}</code></pre>\n<div class="tips">\n	<p>কোড লিখার সময় <span class="key">$ → &#38;&#35;36;</span> বাটনটি অন রাখলে স্বয়ংক্রিয় স্পেশাল চিহ্ন গুলো কোডে পরিবর্তিত হবে।</p>\n</div>\n<div class="mark">\n	<p>What you think just <span class="key">Enter</span>.</p>\n	<p>Bast of luck.. :)</p>\n</div>',preview())}function insCode(){insertSnippet('\n<pre><code class="language-c">',"</code></pre>\n"),preview()}function insMark(){insertSnippet('\n<div class="mark">\n	<p>',"</p>\n</div>\n"),preview()}function insInfo(){insertSnippet('\n<div class="info">\n	<p>',"</p>\n</div>\n"),preview()}function insQues(){insertSnippet('\n<div class="questions">\n	<p>',"</p>\n</div>\n"),preview()}function insTips(){insertSnippet('\n<div class="tips">\n	<p>',"</p>\n</div>\n"),preview()}function insCaution(){insertSnippet('\n<div class="caution">\n	<p>',"</p>\n</div>\n"),preview()}function insertTxt(e){switch(e){case"ul":case"ol":insertSnippet("<"+e+">\n	<li>","</li>\n</"+e+">");break;case"blockquote":insertSnippet("\n<"+e+">\n	<p>","</p>\n</"+e+">\n");break;case"del":case"strong":case"em":case"u":case"p":case"h1":case"h2":case"h3":case"h4":case"li":insertSnippet("<"+e+">","</"+e+">");break;case"hr":insertSnippet("\n<"+e+">\n",null);break;case"a":var t=prompt("Enter the URL:","http://");if(null!==t){var n=prompt("Open in new window?","y or n");null!==n&&("Y"===n.toLocaleUpperCase()?insertSnippet("<"+e+' href="'+t+'" target="_blank" >',"</"+e+">"):insertSnippet("<"+e+' href="'+t+'">',"</"+e+">"))}break;case"img":var t=prompt('Make a Folder named "_images\\" in the "iwcEditor" folder, and keep the Picture(s) there. Then enter the image file name here:',"image.jpg");null!==t&&insertSnippet("\n<p><"+e+' src="_images\\'+t+'" target="_blank" ></'+e+"></p>\n",null);break;default:insertSnippet("SOMETHING["+e+"]WRONG",null)}livePreview&&preview()}function redTxt(){insertSnippet('<span class="red">',"</span>"),preview()}function blueTxt(){insertSnippet('<span class="blue">',"</span>"),preview()}function keyTxt(){insertSnippet('<span class="key">',"</span>"),preview()}function egTxt(){insertSnippet('\n<p class="egno">',"</p>\n"),preview()}function insertSnippet(e,t){var n,i;i=document.getElementById("editor").value,n=getCaret(document.getElementById("editor"));var r=document.getElementById("editor").selectionStart,o=document.getElementById("editor").selectionEnd;if(r===o)if(null===t)var s=i.slice(0,n)+e+i.slice(n,i.length);else var s=i.slice(0,n)+e+"txtHere"+t+i.slice(n,i.length);else var s=i.slice(0,r)+e+i.slice(r,o)+t+i.slice(o,i.length);document.getElementById("editor").value=s}function smiley(e){for(var e=document.getElementById("editor").value,t=e,n=0;e.length>=n;n++){var t=t.replace(":)","");t=t.replace(":(","")}return t}function codeConverter(){codeConvert===!0?(codeConvert=!1,btnOnOff.off("codeConvBtn")):(codeConvert=!0,btnOnOff.on("codeConvBtn"))}function getCaret(e){if(e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();if(null==t)return 0;var n=e.createTextRange(),i=n.duplicate();return n.moveToBookmark(t.getBookmark()),i.setEndPoint("EndToStart",n),i.text.length}return 0}function preview(){document.getElementById("preview").srcdoc=isEditorOn?'<!doctype html><html><head><meta charset="utf-8"><link href="frame.min.css" rel="stylesheet"><link href="solarized_light.css" rel="stylesheet" /><script src="highlight.pack.js"></script><script src="prefixfree.min.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><section class="section">'+smiley(document.getElementById("editor").value)+"</section></body></html>":document.getElementById("editor").value}function stopLiveView(){livePreview===!0?(livePreview=!1,btnOnOff.on("stopLiveViewBtn")):(livePreview=!0,btnOnOff.off("stopLiveViewBtn"))}function bigTxt(){var e=document.getElementById("editor").style.fontSize,t=e.substring(0,2);32>t?(e=Number(t)+1,changeFontSize(e),setCookie("fontSize",e,365)):showMessage("This is the Max Font size.")}function smallTxt(){var e=document.getElementById("editor").style.fontSize,t=e.substring(0,2);t>10?(e=Number(t)-1,changeFontSize(e),setCookie("fontSize",e,365)):showMessage("This is the Min Font size.")}function changeFontSize(e){document.getElementById("editor").style.fontSize=e+"px",document.getElementById("showFontSize").innerHTML=e+"px"}function showMessage(e){alert("Message:\n\n"+e)}function setCookie(e,t,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="expires="+i.toUTCString();document.cookie=e+"='"+t+"'; "+r+"; path=/"}function getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1);if(-1!=r.indexOf(t))return r.substring(t.length,r.length)}return""}function checkCookie(){getCookie("fontSize")}function saveDraft(){var e=document.getElementById("editor").value;LS.setItem("iwcode-draft-"+draftNo,JSON.stringify(e)),livePreview&&preview()}function loadDraft(){var e=JSON.parse(LS.getItem("iwcode-draft-"+draftNo));document.getElementById("editor").value=e,preview(),btnOnOff.on("draft"+draftNo)}function changeDraft(e){btnOnOff.off("draft"+draftNo),draftNo=e,loadDraft()}function minToolbar(){isMinToolbar===!1?(isMinToolbar=!0,document.getElementById("toolbar").style.display="none",btnOnOff.on("minToolbarBtn")):(isMinToolbar=!1,document.getElementById("toolbar").style.display="block",btnOnOff.off("minToolbarBtn")),loadDesign()}function btnTable(){var t,n,i,r,e="<table>";if(n=prompt("Enter total Coloum number:",5),null!==n&&(t=prompt("Enter total Row number:",5),null!==t)){for(i=0;t>i;i++){for(e+="\n	<tr>",r=0;n>r;r++)e+="\n		<td>txtHere</td>";e+="\n	</tr>"}e+="\n</table>",insertSnippet(e,null),preview()}}function showAbout(){isFullWinShow===!0?(isFullWinShow=!1,document.getElementById("fullWindow").style.display="none"):(isFullWinShow=!0,document.getElementById("fullWindow").style.display="block"),loadDesign()}function startPostEditor(){isEditorOn?(isEditorOn=!1,document.getElementById("toolbar").style.display="none",document.getElementById("aboutBtn").style.display="none",document.getElementById("helpBtn").style.display="none",document.getElementById("minToolbarBtn").style.display="none"):(isEditorOn=!0,document.getElementById("toolbar").style.display="block",document.getElementById("aboutBtn").style.display="inline",document.getElementById("helpBtn").style.display="inline",document.getElementById("minToolbarBtn").style.display="inline"),loadDesign()}var LS=window.localStorage,codeConvert=!1,hView=!0,livePreview=!0,isMinToolbar=!1,isFullWinShow=!1,draftNo=1,isEditorOn=!1;window.addEventListener("resize",loadDesign);var btnOnOff={on:function(e){document.getElementById(e).style.borderColor="#D94A38",document.getElementById(e).style.backgroundColor="#D94A38",document.getElementById(e).style.color="#fff",document.getElementById(e).style.textShadow="none"},off:function(e){document.getElementById(e).style.borderColor="#999",document.getElementById(e).style.backgroundColor="#eee",document.getElementById(e).style.color="#000",document.getElementById(e).style.textShadow="1px 1px 0 #fff"}};